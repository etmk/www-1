# disables server signature
ServerSignature Off

# disables directory listing
Options All -Indexes

# disables trailing slash redirects
DirectorySlash Off

# compresses content with the Apache deflate filter
SetOutputFilter DEFLATE

# actives the rewrite engine
RewriteEngine On

# rewrites content that are not in https, except for .test environment
RewriteCond %{HTTPS} !on
RewriteCond %{HTTP_HOST} !.test$
RewriteRule ^.*$ https://%{SERVER_NAME}%{REQUEST_URI} [R,L]

# rewrites index direct call
RewriteRule ^index.html$ / [R,L]
RewriteRule ^fr$ / [R,L]
RewriteRule ^en/index.html$ /en [R,L]
RewriteRule ^en/index.php$ /en [R,L]

# removes trailing slashes
RewriteRule (.*)/$ /$1 [R,L]

# rewrites urls to the template engine
RewriteRule ^([/0-9a-zA-Z-]+)$ index.php?page=$1 [L]

# redirects 403 and 404 http requests to a specific 404 page
ErrorDocument 403 /index.php?page=404
ErrorDocument 404 /index.php?page=404